#!/usr/bin/python
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from pylab import *
import numpy as np
import sys

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.set_xlabel('RPS ($\\alpha$)')
ax.set_ylabel('Capacity ($w$)')
ax.set_zlabel('Cournot profit - PC profit')

rps      = np.arange(0,1.1,0.1)
capacity = np.arange(10,501,10)

profit_pc_raw   ="""e1       49.000    7191.900    3273.400    1955.011    1293.525     895.900     630.511     440.798     298.431     187.653      99.000
e2       96.000   14167.600    6493.600    3886.711    2574.100    1783.600    1255.378     877.478     593.725     372.835     196.000
e3      141.000   20927.100    9660.600    5795.100    3841.725    2663.100    1874.600    1310.039     885.881     555.544     291.000
e4      184.000   27470.400   12774.400    7680.178    5096.400    3534.400    2488.178    1738.482    1174.900     735.783     384.000
e5      225.000   33797.500   15835.000    9541.944    6338.125    4397.500    3096.111    2162.806    1460.781     913.549     475.000
e6      264.000     264.000   18842.400   11380.400    7566.900    5252.400    3698.400    2583.012    1743.525    1088.844     564.000
e7      301.000     301.000   21796.600   13195.544    8782.725    6099.100    4295.044    2999.100    2023.131    1261.668     651.000
e8      336.000     336.000   24697.600   14987.378    9985.600    6937.600    4886.044    3411.069    2299.600    1432.020     736.000
e9      369.000     369.000   27545.400   16755.900   11175.525    7767.900    5471.400    3818.920    2572.931    1599.900     819.000
e10     400.000     400.000   30340.000   18501.111   12352.500    8590.000    6051.111    4222.653    2843.125    1765.309     900.000
e11     429.000     429.000   33081.400   20223.011   13516.525    9403.900    6625.178    4622.267    3110.181    1928.246     979.000
e12     456.000     456.000   35769.600   21921.600   14667.600   10209.600    7193.600    5017.763    3374.100    2088.711    1056.000
e13     481.000     481.000     481.000   23596.878   15805.725   11007.100    7756.378    5409.141    3634.881    2246.705    1131.000
e14     504.000     504.000     504.000   25248.844   16930.900   11796.400    8313.511    5796.400    3892.525    2402.227    1204.000
e15     525.000     525.000     525.000   26877.500   18043.125   12577.500    8865.000    6179.541    4147.031    2555.278    1275.000
e16     544.000     544.000     544.000   28482.844   19142.400   13350.400    9410.844    6558.563    4398.400    2705.857    1344.000
e17     561.000     561.000     561.000   30064.878   20228.725   14115.100    9951.044    6933.467    4646.631    2853.964    1411.000
e18     576.000     576.000     576.000   31623.600   21302.100   14871.600   10485.600    7304.253    4891.725    2999.600    1476.000
e19     589.000     589.000     589.000   33159.011   22362.525   15619.900   11014.511    7670.920    5133.681    3142.764    1539.000
e20     600.000     600.000     600.000   34671.111   23410.000   16360.000   11537.778    8033.469    5372.500    3283.457    1600.000
e21     609.000     609.000     609.000   36159.900   24444.525   17091.900   12055.400    8391.900    5608.181    3421.678    1659.000
e22     616.000     616.000     616.000     616.000   25466.100   17815.600   12567.378    8746.212    5840.725    3557.427    1716.000
e23     621.000     621.000     621.000     621.000   26474.725   18531.100   13073.711    9096.406    6070.131    3690.705    1771.000
e24     624.000     624.000     624.000     624.000   27470.400   19238.400   13574.400    9442.482    6296.400    3821.511    1824.000
e25     625.000     625.000     625.000     625.000   28453.125   19937.500   14069.444    9784.439    6519.531    3949.846    1875.000
e26     624.000     624.000     624.000     624.000   29422.900   20628.400   14558.844   10122.278    6739.525    4075.709    1924.000
e27     621.000     621.000     621.000     621.000   30379.725   21311.100   15042.600   10455.998    6956.381    4199.100    1971.000
e28     616.000     616.000     616.000     616.000   31323.600   21985.600   15520.711   10785.600    7170.100    4320.020    2016.000
e29     609.000     609.000     609.000     609.000   32254.525   22651.900   15993.178   11111.084    7380.681    4438.468    2059.000
e30     600.000     600.000     600.000     600.000   33172.500   23310.000   16460.000   11432.449    7588.125    4554.444    2100.000
e31     589.000     589.000     589.000     589.000   34077.525   23959.900   16921.178   11749.696    7792.431    4667.949    2139.000
e32     576.000     576.000     576.000     576.000   34969.600   24601.600   17376.711   12062.824    7993.600    4778.983    2176.000
e33     561.000     561.000     561.000     561.000   35848.725   25235.100   17826.600   12371.835    8191.631    4887.544    2211.000
e34     544.000     544.000     544.000     544.000     544.000   25860.400   18270.844   12676.727    8386.525    4993.635    2244.000
e35     525.000     525.000     525.000     525.000     525.000   26477.500   18709.444   12977.500    8578.281    5097.253    2275.000
e36     504.000     504.000     504.000     504.000     504.000   27086.400   19142.400   13274.155    8766.900    5198.400    2304.000
e37     481.000     481.000     481.000     481.000     481.000   27687.100   19569.711   13566.692    8952.381    5297.075    2331.000
e38     456.000     456.000     456.000     456.000     456.000   28279.600   19991.378   13855.110    9134.725    5393.279    2356.000
e39     429.000     429.000     429.000     429.000     429.000   28863.900   20407.400   14139.410    9313.931    5487.011    2379.000
e40     400.000     400.000     400.000     400.000     400.000   29440.000   20817.778   14419.592    9490.000    5578.272    2400.000
e41     369.000     369.000     369.000     369.000     369.000   30007.900   21222.511   14695.655    9662.931    5667.060    2419.000
e42     336.000     336.000     336.000     336.000     336.000   30567.600   21621.600   14967.600    9832.725    5753.378    2436.000
e43     301.000     301.000     301.000     301.000     301.000   31119.100   22015.044   15235.427    9999.381    5837.223    2451.000
e44     264.000     264.000     264.000     264.000     264.000   31662.400   22402.844   15499.135   10162.900    5918.598    2464.000
e45     225.000     225.000     225.000     225.000     225.000   32197.500   22785.000   15758.724   10323.281    5997.500    2475.000
e46     184.000     184.000     184.000     184.000     184.000   32724.400   23161.511   16014.196   10480.525    6073.931    2484.000
e47     141.000     141.000     141.000     141.000     141.000   33243.100   23532.378   16265.549   10634.631    6147.890    2491.000
e48      96.000      96.000      96.000      96.000      96.000   33753.600   23897.600   16512.784   10785.600    6219.378    2496.000
e49      49.000      49.000      49.000      49.000      49.000   34255.900   24257.178   16755.900   10933.431    6288.394    2499.000
e50 -9.3860E-10 -9.3860E-10 -9.3860E-10 -9.3860E-10 -9.3860E-10 -9.3860E-10   24611.111   16994.898   11078.125    6354.938    2500.000"""

profit_cournot_raw   ="""e1       49.000    7110.900    3257.400    1949.567    1291.275     894.900     630.067     440.614     298.369     187.641      99.000
e2       96.000   13843.600    6429.600    3864.933    2565.100    1779.600    1253.600     876.743     593.475     372.785     196.000
e3      141.000   20198.100    9516.600    5746.100    3821.475    2654.100    1870.600    1308.386     885.319     555.433     291.000
e4      184.000   26174.400   12518.400    7593.067    5060.400    3518.400    2481.067    1735.543    1173.900     735.585     384.000
e5      225.000   31772.500   15435.000    9405.833    6281.875    4372.500    3085.000    2158.214    1459.219     913.241     475.000
e6      264.000     264.000   18266.400   11184.400    7485.900    5216.400    3682.400    2576.400    1741.275    1088.400     564.000
e7      301.000     301.000   21012.600   12928.767    8672.475    6050.100    4273.267    2990.100    2020.069    1261.063     651.000
e8      336.000     336.000   23673.600   14638.933    9841.600    6873.600    4857.600    3399.314    2295.600    1431.230     736.000
e9      369.000     369.000   26249.400   16314.900   10993.275    7686.900    5435.400    3804.043    2567.869    1598.900     819.000
e10     400.000     400.000   28740.000   17956.667   12127.500    8490.000    6006.667    4204.286    2836.875    1764.074     900.000
e11     429.000     429.000   31145.400   19564.233   13244.275    9282.900    6571.400    4600.043    3102.619    1926.752     979.000
e12     456.000     456.000   33465.600   21137.600   14343.600   10065.600    7129.600    4991.314    3365.100    2086.933    1056.000
e13     481.000     481.000     481.000   22676.767   15425.475   10838.100    7681.267    5378.100    3624.319    2244.619    1131.000
e14     504.000     504.000     504.000   24181.733   16489.900   11600.400    8226.400    5760.400    3880.275    2399.807    1204.000
e15     525.000     525.000     525.000   25652.500   17536.875   12352.500    8765.000    6138.214    4132.969    2552.500    1275.000
e16     544.000     544.000     544.000   27089.067   18566.400   13094.400    9297.067    6511.543    4382.400    2702.696    1344.000
e17     561.000     561.000     561.000   28491.433   19578.475   13826.100    9822.600    6880.386    4628.569    2850.396    1411.000
e18     576.000     576.000     576.000   29859.600   20573.100   14547.600   10341.600    7244.743    4871.475    2995.600    1476.000
e19     589.000     589.000     589.000   31193.567   21550.275   15258.900   10854.067    7604.614    5111.119    3138.307    1539.000
e20     600.000     600.000     600.000   32493.333   22510.000   15960.000   11360.000    7960.000    5347.500    3278.519    1600.000
e21     609.000     609.000     609.000   33758.900   23452.275   16650.900   11859.400    8310.900    5580.619    3416.233    1659.000
e22     616.000     616.000     616.000     616.000   24377.100   17331.600   12352.267    8657.314    5810.475    3551.452    1716.000
e23     621.000     621.000     621.000     621.000   25284.475   18002.100   12838.600    8999.243    6037.069    3684.174    1771.000
e24     624.000     624.000     624.000     624.000   26174.400   18662.400   13318.400    9336.686    6260.400    3814.400    1824.000
e25     625.000     625.000     625.000     625.000   27046.875   19312.500   13791.667    9669.643    6480.469    3942.130    1875.000
e26     624.000     624.000     624.000     624.000   27901.900   19952.400   14258.400    9998.114    6697.275    4067.363    1924.000
e27     621.000     621.000     621.000     621.000   28739.475   20582.100   14718.600   10322.100    6910.819    4190.100    1971.000
e28     616.000     616.000     616.000     616.000   29559.600   21201.600   15172.267   10641.600    7121.100    4310.341    2016.000
e29     609.000     609.000     609.000     609.000   30362.275   21810.900   15619.400   10956.614    7328.119    4428.085    2059.000
e30     600.000     600.000     600.000     600.000   31147.500   22410.000   16060.000   11267.143    7531.875    4543.333    2100.000
e31     589.000     589.000     589.000     589.000   31915.275   22998.900   16494.067   11573.186    7732.369    4656.085    2139.000
e32     576.000     576.000     576.000     576.000   32665.600   23577.600   16921.600   11874.743    7929.600    4766.341    2176.000
e33     561.000     561.000     561.000     561.000   33398.475   24146.100   17342.600   12171.814    8123.569    4874.100    2211.000
e34     544.000     544.000     544.000     544.000     544.000   24704.400   17757.067   12464.400    8314.275    4979.363    2244.000
e35     525.000     525.000     525.000     525.000     525.000   25252.500   18165.000   12752.500    8501.719    5082.130    2275.000
e36     504.000     504.000     504.000     504.000     504.000   25790.400   18566.400   13036.114    8685.900    5182.400    2304.000
e37     481.000     481.000     481.000     481.000     481.000   26318.100   18961.267   13315.243    8866.819    5280.174    2331.000
e38     456.000     456.000     456.000     456.000     456.000   26835.600   19349.600   13589.886    9044.475    5375.452    2356.000
e39     429.000     429.000     429.000     429.000     429.000   27342.900   19731.400   13860.043    9218.869    5468.233    2379.000
e40     400.000     400.000     400.000     400.000     400.000   27840.000   20106.667   14125.714    9390.000    5558.519    2400.000
e41     369.000     369.000     369.000     369.000     369.000   28326.900   20475.400   14386.900    9557.869    5646.307    2419.000
e42     336.000     336.000     336.000     336.000     336.000   28803.600   20837.600   14643.600    9722.475    5731.600    2436.000
e43     301.000     301.000     301.000     301.000     301.000   29270.100   21193.267   14895.814    9883.819    5814.396    2451.000
e44     264.000     264.000     264.000     264.000     264.000   29726.400   21542.400   15143.543   10041.900    5894.696    2464.000
e45     225.000     225.000     225.000     225.000     225.000   30172.500   21885.000   15386.786   10196.719    5972.500    2475.000
e46     184.000     184.000     184.000     184.000     184.000   30608.400   22221.067   15625.543   10348.275    6047.807    2484.000
e47     141.000     141.000     141.000     141.000     141.000   31034.100   22550.600   15859.814   10496.569    6120.619    2491.000
e48      96.000      96.000      96.000      96.000      96.000   31449.600   22873.600   16089.600   10641.600    6190.933    2496.000
e49      49.000      49.000      49.000      49.000      49.000   31854.900   23190.067   16314.900   10783.369    6258.752    2499.000
e50 -8.9494E-10 -8.9494E-10 -8.9494E-10 -8.9494E-10 -8.9494E-10 -8.9494E-10   23500.000   16535.714   10921.875    6324.074    2500.000"""

pc =np.zeros(shape=(50,11))
cournot =np.zeros(shape=(50,11))

i = 0
for p_raw in profit_pc_raw.split('\n'):
    p = p_raw.split()[1:]
    pc[i] = np.array(map(float, p))
    i +=1
i=0
for p_raw in profit_cournot_raw.split('\n'):
    p = p_raw.split()[1:]
    cournot[i] = np.array(map(float, p))
    i +=1

z=(cournot-pc)
x,y = np.meshgrid(rps,capacity)

ax.plot_surface(x, y, z, rstride=10, cstride=10)
#plt.show()
fig.savefig('foo.png',bbox_inches='tight')

