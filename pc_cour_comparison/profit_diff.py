#!/usr/bin/python
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D
from pylab import *
import numpy as np
import sys

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.set_xlabel('RPS ($\\alpha$)')
ax.set_ylabel('Capacity ($w$)')
ax.set_zlabel('Cournot profit - PC profit')

rps      = np.arange(0,1.1,0.1)
capacity = np.arange(10,501,10)

profit_pc_raw   ="""e1      899.000    8041.900    4123.400    2805.011    2143.525    1745.900    1480.511    1290.798    1148.431    1037.653     949.000
e2     1796.000   15867.600    8193.600    5586.711    4274.100    3483.600    2955.378    2577.478    2293.725    2072.835    1896.000
e3     2691.000   23477.100   12210.600    8345.100    6391.725    5213.100    4424.600    3860.039    3435.881    3105.544    2841.000
e4     3584.000   30870.400   16174.400   11080.178    8496.400    6934.400    5888.178    5138.482    4574.900    4135.783    3784.000
e5     4475.000   38047.500   20085.000   13791.944   10588.125    8647.500    7346.111    6412.806    5710.781    5163.549    4725.000
e6     5364.000    5364.000   23942.400   16480.400   12666.900   10352.400    8798.400    7683.012    6843.525    6188.844    5664.000
e7     6251.000    6251.000   27746.600   19145.544   14732.725   12049.100   10245.044    8949.100    7973.131    7211.668    6601.000
e8     7136.000    7136.000   31497.600   21787.378   16785.600   13737.600   11686.044   10211.069    9099.600    8232.020    7536.000
e9     8019.000    8019.000   35195.400   24405.900   18825.525   15417.900   13121.400   11468.920   10222.931    9249.900    8469.000
e10    8900.000    8900.000   38840.000   27001.111   20852.500   17090.000   14551.111   12722.653   11343.125   10265.309    9400.000
e11    9779.000    9779.000   42431.400   29573.011   22866.525   18753.900   15975.178   13972.267   12460.181   11278.246   10329.000
e12   10656.000   10656.000   45969.600   32121.600   24867.600   20409.600   17393.600   15217.763   13574.100   12288.711   11256.000
e13   11531.000   11531.000   11531.000   34646.878   26855.725   22057.100   18806.378   16459.141   14684.881   13296.705   12181.000
e14   12404.000   12404.000   12404.000   37148.844   28830.900   23696.400   20213.511   17696.400   15792.525   14302.227   13104.000
e15   13275.000   13275.000   13275.000   39627.500   30793.125   25327.500   21615.000   18929.541   16897.031   15305.278   14025.000
e16   14144.000   14144.000   14144.000   42082.844   32742.400   26950.400   23010.844   20158.563   17998.400   16305.857   14944.000
e17   15011.000   15011.000   15011.000   44514.878   34678.725   28565.100   24401.044   21383.467   19096.631   17303.964   15861.000
e18   15876.000   15876.000   15876.000   46923.600   36602.100   30171.600   25785.600   22604.253   20191.725   18299.600   16776.000
e19   16739.000   16739.000   16739.000   49309.011   38512.525   31769.900   27164.511   23820.920   21283.681   19292.764   17689.000
e20   17600.000   17600.000   17600.000   51671.111   40410.000   33360.000   28537.778   25033.469   22372.500   20283.457   18600.000
e21   18459.000   18459.000   18459.000   54009.900   42294.525   34941.900   29905.400   26241.900   23458.181   21271.678   19509.000
e22   19316.000   19316.000   19316.000   19316.000   44166.100   36515.600   31267.378   27446.212   24540.725   22257.427   20416.000
e23   20171.000   20171.000   20171.000   20171.000   46024.725   38081.100   32623.711   28646.406   25620.131   23240.705   21321.000
e24   21024.000   21024.000   21024.000   21024.000   47870.400   39638.400   33974.400   29842.482   26696.400   24221.511   22224.000
e25   21875.000   21875.000   21875.000   21875.000   49703.125   41187.500   35319.444   31034.439   27769.531   25199.846   23125.000
e26   22724.000   22724.000   22724.000   22724.000   51522.900   42728.400   36658.844   32222.278   28839.525   26175.709   24024.000
e27   23571.000   23571.000   23571.000   23571.000   53329.725   44261.100   37992.600   33405.998   29906.381   27149.100   24921.000
e28   24416.000   24416.000   24416.000   24416.000   55123.600   45785.600   39320.711   34585.600   30970.100   28120.020   25816.000
e29   25259.000   25259.000   25259.000   25259.000   56904.525   47301.900   40643.178   35761.084   32030.681   29088.468   26709.000
e30   26100.000   26100.000   26100.000   26100.000   58672.500   48810.000   41960.000   36932.449   33088.125   30054.444   27600.000
e31   26939.000   26939.000   26939.000   26939.000   60427.525   50309.900   43271.178   38099.696   34142.431   31017.949   28489.000
e32   27776.000   27776.000   27776.000   27776.000   62169.600   51801.600   44576.711   39262.824   35193.600   31978.983   29376.000
e33   28611.000   28611.000   28611.000   28611.000   63898.725   53285.100   45876.600   40421.835   36241.631   32937.544   30261.000
e34   29444.000   29444.000   29444.000   29444.000   29444.000   54760.400   47170.844   41576.727   37286.525   33893.635   31144.000
e35   30275.000   30275.000   30275.000   30275.000   30275.000   56227.500   48459.444   42727.500   38328.281   34847.253   32025.000
e36   31104.000   31104.000   31104.000   31104.000   31104.000   57686.400   49742.400   43874.155   39366.900   35798.400   32904.000
e37   31931.000   31931.000   31931.000   31931.000   31931.000   59137.100   51019.711   45016.692   40402.381   36747.075   33781.000
e38   32756.000   32756.000   32756.000   32756.000   32756.000   60579.600   52291.378   46155.110   41434.725   37693.279   34656.000
e39   33579.000   33579.000   33579.000   33579.000   33579.000   62013.900   53557.400   47289.410   42463.931   38637.011   35529.000
e40   34400.000   34400.000   34400.000   34400.000   34400.000   63440.000   54817.778   48419.592   43490.000   39578.272   36400.000
e41   35219.000   35219.000   35219.000   35219.000   35219.000   64857.900   56072.511   49545.655   44512.931   40517.060   37269.000
e42   36036.000   36036.000   36036.000   36036.000   36036.000   66267.600   57321.600   50667.600   45532.725   41453.378   38136.000
e43   36851.000   36851.000   36851.000   36851.000   36851.000   67669.100   58565.044   51785.427   46549.381   42387.223   39001.000
e44   37664.000   37664.000   37664.000   37664.000   37664.000   69062.400   59802.844   52899.135   47562.900   43318.598   39864.000
e45   38475.000   38475.000   38475.000   38475.000   38475.000   70447.500   61035.000   54008.724   48573.281   44247.500   40725.000
e46   39284.000   39284.000   39284.000   39284.000   39284.000   71824.400   62261.511   55114.196   49580.525   45173.931   41584.000
e47   40091.000   40091.000   40091.000   40091.000   40091.000   73193.100   63482.378   56215.549   50584.631   46097.890   42441.000
e48   40896.000   40896.000   40896.000   40896.000   40896.000   74553.600   64697.600   57312.784   51585.600   47019.378   43296.000
e49   41699.000   41699.000   41699.000   41699.000   41699.000   75905.900   65907.178   58405.900   52583.431   47938.394   44149.000
e50   42500.000   42500.000   42500.000   42500.000   42500.000   42500.000   67111.111   59494.898   53578.125   48854.938   45000.000"""

profit_cournot_raw   ="""e1      899.000    8122.900    4139.400    2810.456    2145.775    1746.900    1480.956    1290.982    1148.494    1037.665     949.000
e2     1796.000   16191.600    8257.600    5608.489    4283.100    3487.600    2957.156    2578.212    2293.975    2072.884    1896.000
e3     2691.000   24206.100   12354.600    8394.100    6411.975    5222.100    4428.600    3861.692    3436.444    3105.656    2841.000
e4     3584.000   32166.400   16430.400   11167.289    8532.400    6950.400    5895.289    5141.420    4575.900    4135.980    3784.000
e5     4475.000   40072.500   20485.000   13928.056   10644.375    8672.500    7357.222    6417.398    5712.344    5163.858    4725.000
e6     5364.000    5364.000   24518.400   16676.400   12747.900   10388.400    8814.400    7689.624    6845.775    6189.289    5664.000
e7     6251.000    6251.000   28530.600   19412.322   14842.975   12098.100   10266.822    8958.100    7976.194    7212.273    6601.000
e8     7136.000    7136.000   32521.600   22135.822   16929.600   13801.600   11714.489   10222.824    9103.600    8232.810    7536.000
e9     8019.000    8019.000   36491.400   24846.900   19007.775   15498.900   13157.400   11483.798   10227.994    9250.900    8469.000
e10    8900.000    8900.000   40440.000   27545.556   21077.500   17190.000   14595.556   12741.020   11349.375   10266.543    9400.000
e11    9779.000    9779.000   44367.400   30231.789   23138.775   18874.900   16028.956   13994.492   12467.744   11279.740   10329.000
e12   10656.000   10656.000   48273.600   32905.600   25191.600   20553.600   17457.600   15244.212   13583.100   12290.489   11256.000
e13   11531.000   11531.000   11531.000   35566.989   27235.975   22226.100   18881.489   16490.182   14695.444   13298.791   12181.000
e14   12404.000   12404.000   12404.000   38215.956   29271.900   23892.400   20300.622   17732.400   15804.775   14304.647   13104.000
e15   13275.000   13275.000   13275.000   40852.500   31299.375   25552.500   21715.000   18970.867   16911.094   15308.056   14025.000
e16   14144.000   14144.000   14144.000   43476.622   33318.400   27206.400   23124.622   20205.584   18014.400   16309.017   14944.000
e17   15011.000   15011.000   15011.000   46088.322   35328.975   28854.100   24529.489   21436.549   19114.694   17307.532   15861.000
e18   15876.000   15876.000   15876.000   48687.600   37331.100   30495.600   25929.600   22663.763   20211.975   18303.600   16776.000
e19   16739.000   16739.000   16739.000   51274.456   39324.775   32130.900   27324.956   23887.227   21306.244   19297.221   17689.000
e20   17600.000   17600.000   17600.000   53848.889   41310.000   33760.000   28715.556   25106.939   22397.500   20288.395   18600.000
e21   18459.000   18459.000   18459.000   56410.900   43286.775   35382.900   30101.400   26322.900   23485.744   21277.122   19509.000
e22   19316.000   19316.000   19316.000   19316.000   45255.100   36999.600   31482.489   27535.110   24570.975   22263.402   20416.000
e23   20171.000   20171.000   20171.000   20171.000   47214.975   38610.100   32858.822   28743.569   25653.194   23247.236   21321.000
e24   21024.000   21024.000   21024.000   21024.000   49166.400   40214.400   34230.400   29948.278   26732.400   24228.622   22224.000
e25   21875.000   21875.000   21875.000   21875.000   51109.375   41812.500   35597.222   31149.235   27808.594   25207.562   23125.000
e26   22724.000   22724.000   22724.000   22724.000   53043.900   43404.400   36959.289   32346.441   28881.775   26184.054   24024.000
e27   23571.000   23571.000   23571.000   23571.000   54969.975   44990.100   38316.600   33539.896   29951.944   27158.100   24921.000
e28   24416.000   24416.000   24416.000   24416.000   56887.600   46569.600   39669.156   34729.600   31019.100   28129.699   25816.000
e29   25259.000   25259.000   25259.000   25259.000   58796.775   48142.900   41016.956   35915.553   32083.244   29098.851   26709.000
e30   26100.000   26100.000   26100.000   26100.000   60697.500   49710.000   42360.000   37097.755   33144.375   30065.556   27600.000
e31   26939.000   26939.000   26939.000   26939.000   62589.775   51270.900   43698.289   38276.206   34202.494   31029.814   28489.000
e32   27776.000   27776.000   27776.000   27776.000   64473.600   52825.600   45031.822   39450.906   35257.600   31991.625   29376.000
e33   28611.000   28611.000   28611.000   28611.000   66348.975   54374.100   46360.600   40621.855   36309.694   32950.989   30261.000
e34   29444.000   29444.000   29444.000   29444.000   29444.000   55916.400   47684.622   41789.053   37358.775   33907.906   31144.000
e35   30275.000   30275.000   30275.000   30275.000   30275.000   57452.500   49003.889   42952.500   38404.844   34862.377   32025.000
e36   31104.000   31104.000   31104.000   31104.000   31104.000   58982.400   50318.400   44112.196   39447.900   35814.400   32904.000
e37   31931.000   31931.000   31931.000   31931.000   31931.000   60506.100   51628.156   45268.141   40487.944   36763.977   33781.000
e38   32756.000   32756.000   32756.000   32756.000   32756.000   62023.600   52933.156   46420.335   41524.975   37711.106   34656.000
e39   33579.000   33579.000   33579.000   33579.000   33579.000   63534.900   54233.400   47568.778   42558.994   38655.789   35529.000
e40   34400.000   34400.000   34400.000   34400.000   34400.000   65040.000   55528.889   48713.469   43590.000   39598.025   36400.000
e41   35219.000   35219.000   35219.000   35219.000   35219.000   66538.900   56819.622   49854.410   44617.994   40537.814   37269.000
e42   36036.000   36036.000   36036.000   36036.000   36036.000   68031.600   58105.600   50991.600   45642.975   41475.156   38136.000
e43   36851.000   36851.000   36851.000   36851.000   36851.000   69518.100   59386.822   52125.039   46664.944   42410.051   39001.000
e44   37664.000   37664.000   37664.000   37664.000   37664.000   70998.400   60663.289   53254.727   47683.900   43342.499   39864.000
e45   38475.000   38475.000   38475.000   38475.000   38475.000   72472.500   61935.000   54380.663   48699.844   44272.500   40725.000
e46   39284.000   39284.000   39284.000   39284.000   39284.000   73940.400   63201.956   55502.849   49712.775   45200.054   41584.000
e47   40091.000   40091.000   40091.000   40091.000   40091.000   75402.100   64464.156   56621.284   50722.694   46125.162   42441.000
e48   40896.000   40896.000   40896.000   40896.000   40896.000   76857.600   65721.600   57735.967   51729.600   47047.822   43296.000
e49   41699.000   41699.000   41699.000   41699.000   41699.000   78306.900   66974.289   58846.900   52733.494   47968.036   44149.000
e50   42500.000   42500.000   42500.000   42500.000   42500.000   42500.000   68222.222   59954.082   53734.375   48885.802   45000.000"""

pc =np.zeros(shape=(50,11))
cournot =np.zeros(shape=(50,11))

i = 0
for p_raw in profit_pc_raw.split('\n'):
    p = p_raw.split()[1:]
    pc[i] = np.array(map(float, p))
    i +=1
i=0
for p_raw in profit_cournot_raw.split('\n'):
    p = p_raw.split()[1:]
    cournot[i] = np.array(map(float, p))
    i +=1

z=(cournot-pc)
x,y = np.meshgrid(rps,capacity)

ax.plot_surface(x, y, z, rstride=10, cstride=10)
#plt.show()
fig.savefig('foo.png',bbox_inches='tight')

